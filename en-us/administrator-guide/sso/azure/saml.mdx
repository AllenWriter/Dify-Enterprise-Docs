---
title: Configuring SAML with Azure Entra ID
---

This guide will use Azure Entra ID as the SSO identity provider, connecting to the Dify Enterprise using the SAML protocol.

## 1. Create a new application in Azure

Access the Azure admin backend page, navigate to the Applications page, and click on New application.

![](https://assets-docs.dify.ai/2024/11/4f52715ff661e6c9430af09b4b2a4736.png)

Select **Create your own application**, enter an application name such as dify, then choose **Integrate any other application you don't find in the gallery (Non-gallery)**, and click **Create**.

![](https://assets-docs.dify.ai/2024/11/b823ecfaa94d18ba0ac794cc0290dc7f.png)

Next, you need to assign visible members to this application. Only authorized Azure members will be allowed to log in to the Dify Enterprise. Select **Users and groups** on the left side of the application, then click **Add user/group**.

![](https://assets-docs.dify.ai/2024/11/ed3c6f5de21c75e2261bf05d055ffb9e.png)

## 2. Configure the application

Click on the **Single sign-on** option under **Manage** on the left side of the application, then select the **SAML**.

![](https://assets-docs.dify.ai/2024/11/7a5f653e751bf20c01c7eb53cc79ddde.png)

Edit the SAML configuration, fill in the Dify Enterprise's ACS URL in both the Entity ID and Reply URL fields.

<div style={{ display: 'flex', gap: '20px' }}>
  <Frame>
    <img src="https://assets-docs.dify.ai/2024/11/639bb89e402f8f20078d6c7a14ca0297.png" alt="Image 1" />
  </Frame>
  <Frame>
    <img src="https://assets-docs.dify.ai/2024/11/236a4995e4fe338d12b41993fc237611.png" alt="Image 2" />
  </Frame>
</div>

System administrators need to go to the Authentication page of the Dify Enterprise, click "+ New Identity Provider → New SAML Provider", and then obtain the ACS URL.

![](https://assets-docs.dify.ai/2024/11/f66303a3902d7fff58c76228f6485386.png)

It typically follows this format:

```url
https://[your-dify-enterprise-url]/console/api/enterprise/sso/saml/acs
```

After obtaining the ACS URL, switch back to the Azure application page, download the Certificate from the SAML Certificates tab; also copy the Login URL from the set up page. These two parameters need to be filled in the Dify Enterprise admin backend.

![](https://assets-docs.dify.ai/2024/11/ab7e3bd7067858ec4627d1d863244e81.png)

### Advanced configuration: Edit attributes and claims

1. In the application's SSO configuration page, click the **Edit** button next to **Attributes & Claims**.

![](https://assets-docs.dify.ai/2024/11/97a46bf1b5264ef72ad4b202fdf2a772.png)

2. Click on **Unique User Identifier (Name ID)** and change the source attribute to `user.mail`.

![](https://assets-docs.dify.ai/2024/11/183dd293f17f87081ac4c2390b583fb0.png)

## 3. Complete the configuration on Dify

System administrators click on the Authentication page of the Dify Enterprise, click "+ New Identity Provider → New SAML Provider",
- Fill in the Azure application's Login URL in the IdP SSO URL field;
- Fill in the content of the downloaded Certificate file in the X509 Signing Certificate field, use the following format:

   ```certificate
   -----BEGIN CERTIFICATE-----
   {certificate}
   -----END CERTIFICATE-----
   ```

![](https://assets-docs.dify.ai/2024/11/556e3d68efbc742711e4313534a2e95c.png)

## 4. Enable SSO Enforcement

After completing the SAML Provider configuration, tap the toggle button to the right of **"Workspaces SSO"** to enable SSO authentication for your team. 

Once enabled, members of your organization must complete the SSO authentication before accessing resources in the Dify Enterprise
