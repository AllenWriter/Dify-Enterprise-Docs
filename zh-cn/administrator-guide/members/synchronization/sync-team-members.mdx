---
title: 同步成员
description: 通过 SCIM 标准自动同步组织成员
---

## 概述

Dify 企业版支持通过 [SCIM](https://scim.cloud/)（System for Cross-domain Identity Management）标准协议自动同步现有的部门/人员结构，帮助企业管理员高效管理大规模组织人员。

### 功能特点

- 支持标准 SCIM 2.0 协议
- 自动同步用户信息和组织结构
- 支持多种主流身份提供商集成
- 实时更新成员变动

## 配置前准备

在配置身份提供商之前，您需要：

1. 确保具有系统管理员权限
2. 准备好身份提供商的管理账号
3. 了解您组织使用的身份提供商类型

## 配置步骤

### 第一步：获取 SCIM 配置信息

1. **进入同步设置页面**
   
   导航至企业管理后台，点击左侧菜单栏 **成员** → **同步设置**。

   ![同步设置界面](https://assets-docs.dify.ai/2025/05/764e71213cadcaa45c62c56a2dc38cbf.png)

2. **获取 SCIM 端点 URL**
   
   复制页面中显示的 `SCIM 2.0 Base URL`，此 URL 将用于身份提供商的配置。

3. **生成认证令牌**
   
   - 点击"获取令牌"按钮
   - 系统将生成 OAuth Bearer Token
   
   <Warning>
     认证令牌仅显示一次，请立即复制并妥善保存。如果遗失，需要重新生成新的令牌。
   </Warning>

4. **保存配置信息**
   
   将以下信息妥善保存，用于后续配置：
   - SCIM Base URL
   - OAuth Bearer Token

### 第二步：配置身份提供商

根据您组织使用的身份提供商，选择相应的配置指南：

<CardGroup cols={2}>
  <Card title="Azure Active Directory" icon="microsoft" href="./azure">
    配置 Azure AD 与 Dify 的成员同步
  </Card>
  <Card title="Okta" icon="key" href="./okta">
    配置 Okta 与 Dify 的成员同步
  </Card>
</CardGroup>

## 支持的属性映射

Dify SCIM 实现支持以下用户属性映射：

| SCIM 属性 | Dify 字段 | 说明 |
| --------- | --------- | ---- |
| userName | 用户名 | 用户的唯一标识符 |
| displayName | 显示名称 | 用户的显示名称 |
| emails[type eq "work"].value | 邮箱 | 工作邮箱地址 |
| active | 状态 | 用户激活状态 |
| groups | 群组 | 用户所属的群组 |

## 最佳实践

1. **定期审核同步状态**
   - 定期检查同步日志
   - 验证用户信息的准确性
   - 及时处理同步错误

2. **安全建议**
   - 妥善保管认证令牌
   - 定期更新认证令牌
   - 限制 SCIM 端点访问权限

3. **测试同步**
   - 在正式环境部署前先在测试环境验证
   - 先同步少量用户进行验证
   - 确认属性映射正确

## 故障排除

### 常见问题

<Accordion title="同步失败，提示认证错误">
  - 检查认证令牌是否正确
  - 确认令牌未过期
  - 验证 SCIM URL 配置是否正确
</Accordion>

<Accordion title="用户信息未完全同步">
  - 检查身份提供商的属性映射配置
  - 确认所有必填字段都已映射
  - 查看同步日志了解具体错误信息
</Accordion>

<Accordion title="群组信息未同步">
  - 确认身份提供商支持群组同步
  - 检查群组属性映射配置
  - 验证用户在身份提供商中的群组分配
</Accordion>

## 相关文档

- [成员管理](/zh-cn/administrator-guide/members/member-management)
- [权限管理](/zh-cn/administrator-guide/members/permission-management)
- [认证方式](/zh-cn/administrator-guide/authentication)
