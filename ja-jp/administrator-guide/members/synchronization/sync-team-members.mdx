---
title: メンバー同期
description: SCIM 標準を使用して組織メンバーを自動同期します。バージョン ≥ v2.7.0
---

## 概要

Dify Enterprise Edition は、[SCIM](https://scim.cloud/)（System for Cross-domain Identity Management）標準プロトコルを通じて、既存の部門/人員構造の自動同期をサポートし、企業管理者が大規模な組織人員を効率的に管理できるよう支援します。

- 標準 SCIM 2.0 プロトコルをサポート
- ユーザー情報と組織構造を自動同期
- 複数の主流 ID プロバイダーとの統合をサポート
- メンバー変更のオンライン自動更新

## 設定前の準備

自動同期メカニズムを有効にする前に、以下の準備が必要です：

1. システム管理者権限を取得
2. 組織が使用している ID プロバイダーのタイプを理解し、バックエンド管理権限を持つ

## 設定手順

### ステップ 1：SCIM 設定情報の取得

<Steps>
  <Step title="同期設定ページへのアクセス">
    エンタープライズ管理バックエンドに移動し、左側メニューバーの **メンバー** → **同期設定** をクリックします。

    <img src="https://assets-docs.dify.ai/2025/05/764e71213cadcaa45c62c56a2dc38cbf.png" alt="同期設定インターフェース" />
  </Step>

  <Step title="SCIM エンドポイント URL の取得">
    ページに表示されている `SCIM 2.0 Base URL` をコピーします。この URL は ID プロバイダーの設定に使用されます。
  </Step>

  <Step title="認証トークンの生成">
    - 「トークンを取得」ボタンをクリック
    - システムが OAuth Bearer Token を生成します
    
    <Warning>
      認証トークンは一度だけ表示されます。すぐにコピーして安全に保存してください。紛失した場合は、新しいトークンを再生成する必要があります。
    </Warning>
  </Step>

  <Step title="設定情報の保存">
    後続の設定のために以下の情報を適切に保存してください：
    - SCIM Base URL
    - OAuth Bearer Token
  </Step>
</Steps>

### ステップ 2：ID プロバイダーの設定

組織が使用している ID プロバイダーに基づいて、適切な設定ガイドを選択してください：

<CardGroup cols={2}>
  <Card title="Azure Active Directory" icon="microsoft" href="./azure">
    Azure AD と Dify 間のメンバー同期を設定
  </Card>
  <Card title="Okta" icon="key" href="./okta">
    Okta と Dify 間のメンバー同期を設定
  </Card>
</CardGroup>

## 属性マッピング関係

Dify 機能と SCIM フィールドの属性マッピング関係：

| SCIM リソースタイプ | Dify 機能 | サポートされる操作 | 追加説明 |
|----------------|------------------|-------------------------------|--------------------------------------------------------------|
| User           | メンバー（ユーザーメール、ユーザー名、ユーザーステータス） | 作成 / 更新 / 無効化（無効化操作は実際にユーザーデータを削除せず、Dify Enterprise 内のメンバーのステータスを `アクティブ` から `無効` に変更するだけで、ユーザーデータは保持されます） |
| Group          | グループ（名前、メンバー）        | 作成 / グループ名の更新 / メンバーの更新 / 削除 | 削除操作はグループとそのメンバー関係を永久に削除します |

## 重要な注意事項

<Info>
  SCIM 同期を有効にした後、データの一貫性を確保するため、ID プロバイダー (IdP) がユーザーとグループ管理の唯一の権威あるソースになります。Admin API の使用制限に関する詳細情報については、[エンタープライズ API](ja-jp/administrator-guide/admin-apis) ドキュメントを参照してください。
</Info>

### 機能制限

**SCIM 有効時：**
- ユーザーとグループ管理は ID プロバイダーを通じて完了する必要があります
- Admin API は読み取り専用操作のみをサポート
- メンバーの自己登録はサポートされません

**SCIM 無効時：**
- Admin API の完全な管理権限が復元されます
- すべてのユーザー管理操作がサポートされます

### 緊急操作ガイド

Admin API を通じて一時的な修正が必要な場合：
1. SCIM を一時的に無効化
2. 必要な API 操作を実行
3. SCIM を再度有効化し、同期ステータスを確認

<Warning>
  この操作はデータ同期の競合を引き起こす可能性があります。慎重に実行してください。
</Warning>

SCIM と Admin API の相互作用に関する技術的な詳細については、[エンタープライズ API](/ja-jp/administrator-guide/admin-apis) ドキュメントをご参照ください。
