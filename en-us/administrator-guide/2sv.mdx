---
title: Two-Step Verification
description: For system administrators, Dify Enterprise Edition version ≥v2.4.0 required.
---

## Introduction

The enterprise admin panel contains a large amount of sensitive user information. Two-step verification provides enhanced security protection for Dify Enterprise Edition system administrator accounts. Once enabled, even if the original password is accidentally leaked, unauthorized access can still be prevented, ensuring the security of administrator accounts and data in the enterprise system.

Two-Step Verification is a security mechanism that requires users to enter a verification code generated in real-time by an authenticator app after entering the correct password to complete the login process. This "two-factor" authentication significantly improves account security.

## Implementation Prerequisites

Before configuring two-step verification, please ensure you meet the following requirements:

1. **System administrator privileges** - Only system administrators can configure two-step verification
2. **Authenticator app** - A compatible authenticator app installed on your mobile device

<Info>
Authenticator apps (such as [Google Authenticator](https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2)) are based on the TOTP (Time-based One-Time Password) standard, generating a new verification code every 30 seconds. Other supported apps include Microsoft Authenticator, Authy, and 1Password.
</Info>

## Enabling Two-Step Verification

Before enabling global two-step verification for your team, you must first configure two-step verification for your personal account.

### Personal Account

Steps to configure personal two-step verification:

<Steps>
  <Step title="Access Admin Panel">
    Log in to the Dify Enterprise Edition admin panel.
  </Step>
  <Step title="Open Two-Step Verification Settings">
    Click the "Two-Step Verification" option in the sidebar menu.
  </Step>
  <Step title="Configure Authenticator">
    Find the authenticator section and click the "Configure" button on the right.
  </Step>
  <Step title="Scan QR Code">
    Use your authenticator app to scan the displayed QR code.
  </Step>
  <Step title="Enter Verification Code">
    Enter the six-digit verification code displayed in your authenticator app to complete the setup.
  </Step>
</Steps>

If you cannot scan the QR code, hover over the Setup Key to view the key text. Enter this key into your authenticator app to generate a six-digit verification code, then enter this code in the verification field.

![](https://assets-docs.dify.ai/2025/04/fd6b474384081f4079aa453c45c07562.png)

After enabling two-step verification, backup codes will be generated. To avoid being unable to access your account if you lose your device with the authenticator app, we recommend manually copying or printing these backup codes and storing them in a secure location.

![](https://assets-docs.dify.ai/2025/04/2c88c1492bf9a079df9ad4a25e1923ac.png)

Backup codes are one-time use only; once used, they become invalid. If you need more backup codes, click "Regenerate."

![](https://assets-docs.dify.ai/2025/04/8313cf497c66cfef7dee2a4ae816c32b.png)

### Enterprise Global Setting

> All system administrators have the authority to enable global two-step verification for the enterprise; however, global verification can only be enabled after personal two-step verification has been configured.

Go to **Settings** → **Authentication** to enable global two-step verification for the enterprise. Once enabled, every system administrator will be required to provide an additional verification code when logging into the enterprise admin panel. If there are system administrators who haven't set up two-step verification yet, please refer to the [FAQ](#how-do-administrators-who-havent-enabled-personal-account-two-step-verification-log-in-after-global-enforcement).

![](https://assets-docs.dify.ai/2025/04/1271b3b0e39558465dbb79b17d1a9721.png)

## Modifying Two-Step Verification

Access the enterprise admin panel, click "Two-Step Verification," and click the "Edit" button in the menu options to the right of the authenticator. In the verification page that appears, enter the new six-digit verification code displayed by your authenticator to confirm your identity and complete the modification.

## Disabling Two-Step Verification

<Warning>
Disabling two-step verification removes an additional security layer, leaving accounts relying solely on password protection and significantly increasing the risk of unauthorized access.
</Warning>

### Personal Account

> If the enterprise has enabled global mandatory two-step verification, you cannot disable two-step verification for your personal account.

Access the enterprise admin panel, click "Two-Step Verification" → "Disable Two-Step Verification."

### Enterprise Global Setting

Access the enterprise admin panel, click **"Settings" → "Authentication"** and turn off the two-step verification toggle.

<Note>
    System administrators will receive corresponding notifications in their email when two-step verification is enabled, modified, or disabled.
</Note>

## Frequently Asked Questions

### What should I do if I lose my device with the authenticator app?

If you've forgotten or lost your original device, use the following methods to log in:

1. **Use backup codes**: Select the "Use backup code" option on the login page and enter one of your previously saved backup codes. Note that each backup code can only be used once.
2. **Contact other system administrators**: If you don't have backup codes, contact other system administrators in your team to request temporary access or assistance in resetting your two-step verification settings.

### What if the system shows an error when I enter the correct verification code?

Verification code errors usually occur for the following reasons:

1. **Time synchronization issues**: Authenticator apps generate codes based on time. Ensure your device's time is synchronized with standard time. Most smartphones automatically synchronize time, but if you've turned off auto-sync, enable it in your device settings.
2. **Expired code**: Authenticator verification codes typically update every 30 seconds. If you enter a code as it's about to expire, it may fail. Wait for a new code to be generated and try again.
3. **Device and account mismatch**: Confirm you're using the correct authenticator app and account to generate verification codes.

### How do I migrate my authenticator after changing phones?

There are two methods to migrate your authenticator:

1. **Use in-app migration feature**: Some authenticator apps (like recent versions of Google Authenticator) provide account export/import functionality, allowing you to transfer authenticator information to a new device.
2. **Reconfigure two-step verification**:
   - Log in using a backup code.
   - Reference [Modifying Two-Step Verification](#modifying-two-step-verification), go to your personal two-step verification settings page, and click "Edit."
   - Complete verification using the code generated by your new device.

### How do administrators who haven't enabled personal account two-step verification log in after global enforcement?

When global two-step verification is enforced, the login process for administrators who haven't enabled two-step verification is as follows:

1. The administrator logs in using their email and password (or SSO).
2. The system automatically detects that the administrator hasn't configured two-step verification and provides setup instructions on the enterprise login page.
3. The administrator needs to download an authenticator app and complete the two-step verification setup according to the on-screen instructions.
4. After setup is complete, entering the six-digit verification code will allow the administrator to continue logging into the enterprise admin panel.

### Is two-step verification still necessary if the enterprise uses SSO login?

Yes, even if your enterprise uses an SSO (Single Sign-On) system, we still recommend enabling two-step verification. This provides dual protection:

1. SSO ensures unified authentication of user identity across enterprise applications.
2. Two-step verification provides an additional security layer for the enterprise admin panel, preventing unauthorized access in case SSO credentials are compromised.

This multi-layered security strategy (also known as "defense in depth") is a best practice for enterprise information security.
